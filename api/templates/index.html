<div class="container py-5">
    <div class="row">

        {% for event in events %}

        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-white">
                    <small class="text-muted">Last Updated: {{ event['last updated'] }}</small>
                    <h5 class="mt-1">{{ event['Event Name'] }}</h5>
                </div>
                <div class="card-body">
                    <p>{{ event['Description'] }}</p>
                    <hr>
                    <p class="mb-1"><strong>Date:</strong> {{ event['Date'] }}</p>
                    <p class="mb-1"><strong>Time:</strong> {{ event['Time'] }}</p>
                    
                    <p class="mb-0">
                        <strong>Location:</strong> 
                        <a href="#" 
                            class="text-primary map-link" 
                            data-bs-toggle="modal" 
                            data-bs-target="#mapModal" 
                            data-address="{{ event['Location'] }}">
                            {{ event['Location'] }}
                        </a>
                    </p>
                </div>
            </div>
        </div>

        {% endfor %}

    </div>
</div>

<div class="modal fade" id="mapModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Event Location</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <iframe id="mapFrame" width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // This finds all links with the class "map-link"
    const mapLinks = document.querySelectorAll('.map-link');
    const mapFrame = document.getElementById('mapFrame');

    mapLinks.forEach(link => {
        link.addEventListener('click', function() {
            // Grab the address from the "data-address" attribute we created above
            const address = this.getAttribute('data-address');
            const encodedAddress = encodeURIComponent(address);
            
            // Update the Google Maps embed URL
            mapFrame.src = `https://maps.google.com/maps?q=${encodedAddress}&t=&z=15&ie=UTF8&iwloc=&output=embed`;
        });
    });
});
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script